# Maintainer: Dct Mei <dctxmei@yandex.com>

pkgname='meta-rules-dat'
pkgver='20240117'
pkgrel='1'
pkgdesc="rules-dat for mihomo"
arch=('x86_64')
url="https://github.com/MetaCubeX/${pkgname}"
license=('GPL-3.0-only')
source=(
    "${pkgname}-${pkgver}-country.mmdb::${url}/releases/download/latest/country.mmdb"
    "${pkgname}-${pkgver}-geosite.dat::${url}/releases/download/latest/geosite.dat"
    "${pkgname}-${pkgver}-geoip.dat::${url}/releases/download/latest/geoip.dat"
)
sha256sums=(
    'd2340c06e4b905069f84b327f672c700090605ece5aa61f4bec8937190f9835a'
    'c51998ba58f2edbedac04c2e59a249e6db44da2acb40a9ef50ff744f12b03acc'
    '0fa8fba8668701bf2a1e7d6baec817899a6dc2ec8f7976d3cfd836263236319d'
)

pkgver() {
    cd "${pkgname}"
    echo "$(date -I)"
}

package() {
    cd "${pkgname}"
    install -Dm 644 "${pkgname}-${pkgver}-country.mmdb" "${pkgdir}/etc/clash/Country.mmdb"
    install -Dm 644 "${pkgname}-${pkgver}-geosite.dat" "${pkgdir}/etc/clash/geosite.dat"
    install -Dm 644 "${pkgname}-${pkgver}-geoip.dat" "${pkgdir}/etc/clash/geoip.dat"
}